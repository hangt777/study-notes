# STM32学习笔记

## STM32时钟配置
在STM32时钟配置过程中，需要根据芯片的工作条件选取合适的时钟频率，因为时钟频率高则功耗也会高。

对于外设的寄存器地址，在存储器映像的基础上加上偏移地址（例如GPIO手册），即可得到外设的物理地址。

# STM32型号容量
不同型号的STM32芯片容量大小有所不同，例如：
- 小容量：16-32KB
- 中容量：64-128KB
- 大容量：256-512KB
- 超大容量：512-1023KB
- 互联型：CL
- 超值型：LD_VL, MD_VL, HD_VL

启动文件startup_stm32f10x_ld.s用于初始化堆栈指针、设置PC指针的值、设置中断向量表、配置系统时钟等操作，最终跳转到main函数中。

关于中断，可以按照抢占优先级、子优先级和IRQ编号的顺序进行排序，同时需要注意中断嵌套的情况。

VIC中断控制器用于控制STM32中的中断，可以捕获引脚电平变化并申请中断事件。

使用外设前需要先使能，例如使能GPIOA时钟可以使用_HAL_RCC_GPIOA_CLK_ENABLE()函数。

在系统时钟配置过程中，推挽输出的高低电平都有驱动能力，而开漏输出的高电平相当于高阻态，无驱动能力，低电平有驱动能力。

在按键按下时，会产生电压抖动，可以使用delay函数进行消抖（一般为20ms）。

单工通信和双工通信是两种常见的通信方式。

不同的电平标准表示不同的逻辑状态，例如TTL电平中+3.3V和+5V分别表示逻辑1，而RS232电平中-3~-15V表示逻辑1，3~15V表示逻辑0。

最后，RS485电平中两线的压差+2~+6V表示逻辑1，-2~-6V表示逻辑0。

# PX4 技术文档笔记
## PX4简介
PX4是一个开源的自动驾驶系统，用于飞行器、地面车辆和船只。它提供了一个灵活的软件框架，支持多种飞行控制器硬件，并具备高度可定制化的功能。

## 安装和设置
**安装：** 在PX4的官方网站上下载最新的固件文件，安装编译工具链后，构建并烧录固件到飞行控制器上。
**设置：** 通过连接地面站（如QGroundControl）进行参数配置和航点设定等。

## 飞行控制
**飞行模式：** PX4支持手动、半自动和自动飞行模式，其中包括Stabilized（稳定）、Altitude（高度）、Position（位置）和Mission（任务）等模式。
**控制器：** PX4控制器包括姿态控制器、速度控制器和位置控制器等，可进行PID控制和自适应控制。
**传感器：** PX4支持多种传感器，包括加速度计、陀螺仪、磁力计、气压计、GPS等，可以进行校准和配置。

## 开发
**MAVLink：** PX4使用MAVLink协议与地面站通信，你可以通过MAVLink API与PX4进行通信。
**NuttX：** PX4使用NuttX作为其实时操作系统，你可以深入了解NuttX的文档以进行系统级别的开发。
